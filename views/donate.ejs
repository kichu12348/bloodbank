<%- include('partials/header') %>
<%- include('partials/nav') %>

<main class="max-w-2xl mx-auto px-4 py-6">
  <h1 class="text-2xl font-semibold mb-4">Record Donation</h1>

  <% if (message) { %>
    <div class="mb-4 p-3 rounded bg-green-100 text-green-800"><%= message %></div>
  <% } %>
  <% if (error) { %>
    <div class="mb-4 p-3 rounded bg-red-100 text-red-800"><%= error %></div>
  <% } %>

  <form action="/inventory/donate" method="POST" class="space-y-4 bg-white p-4 border rounded shadow-sm">
    <div>
      <label class="block text-sm font-medium mb-1">Donor</label>
      <select name="donor_id" class="w-full border rounded px-3 py-2" required>
        <option value="">Select donor...</option>
        <% donors.forEach(d => { %>
          <option value="<%= d.donor_id %>" <%= (form.donor_id == d.donor_id) ? 'selected' : '' %>><%= d.name %> (<%= d.blood_group %>)</option>
        <% }) %>
      </select>
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">Donation Date</label>
      <input type="date" name="donation_date" value="<%= form.donation_date || '' %>" class="w-full border rounded px-3 py-2" required />
    </div>
    <div class="flex gap-2">
      <button class="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700">Save</button>
      <a href="/inventory" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">Cancel</a>
    </div>
  </form>
</main>

<%- include('partials/footer') %>
